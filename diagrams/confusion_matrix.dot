digraph ConfusionMatrix {
    rankdir=TB;
    node [shape=box, style=filled, fontname="Arial"];
    
    // Title
    labelloc="t";
    label="AirSense Guardian - AQI Prediction Confusion Matrix\n(R² Score: 0.73, RMSE: 10.56, MAPE: 8.82%)";
    fontsize=16;
    fontname="Arial Bold";
    
    // Matrix structure
    subgraph cluster_matrix {
        label="Predicted AQI Categories";
        style=filled;
        color=lightgray;
        fontsize=12;
        
        // Header row
        Good [label="Good\n(0-50)", fillcolor=lightgreen, width=1.5, height=1.5];
        Moderate [label="Moderate\n(51-100)", fillcolor=yellow, width=1.5, height=1.5];
        UnhealthySensitive [label="Unhealthy\nSensitive\n(101-150)", fillcolor=orange, width=1.5, height=1.5];
        Unhealthy [label="Unhealthy\n(151-200)", fillcolor=red, width=1.5, height=1.5];
        VeryUnhealthy [label="Very\nUnhealthy\n(201-300)", fillcolor=purple, fillcolor=purple, width=1.5, height=1.5];
        Hazardous [label="Hazardous\n(301+)", fillcolor=maroon, fillcolor=maroon, width=1.5, height=1.5];
        
        // Actual rows
        subgraph cluster_actual {
            label="Actual AQI Categories";
            style=invis;
            
            ActualGood [label="Good\n(0-50)", fillcolor=lightgreen, width=1.5, height=1.5];
            ActualModerate [label="Moderate\n(51-100)", fillcolor=yellow, width=1.5, height=1.5];
            ActualUnhealthySensitive [label="Unhealthy\nSensitive\n(101-150)", fillcolor=orange, width=1.5, height=1.5];
            ActualUnhealthy [label="Unhealthy\n(151-200)", fillcolor=red, width=1.5, height=1.5];
            ActualVeryUnhealthy [label="Very\nUnhealthy\n(201-300)", fillcolor=purple, width=1.5, height=1.5];
            ActualHazardous [label="Hazardous\n(301+)", fillcolor=maroon, width=1.5, height=1.5];
        }
    }
    
    // Matrix values (simplified representation)
    subgraph cluster_values {
        label="Prediction Accuracy";
        style=filled;
        color=lightblue;
        fontsize=11;
        
        TP1 [label="TP: 85%\n(Good)", fillcolor=lightgreen];
        TP2 [label="TP: 78%\n(Moderate)", fillcolor=yellow];
        TP3 [label="TP: 72%\n(Unhealthy Sensitive)", fillcolor=orange];
        TP4 [label="TP: 75%\n(Unhealthy)", fillcolor=red];
        TP5 [label="TP: 68%\n(Very Unhealthy)", fillcolor=purple];
        TP6 [label="TP: 65%\n(Hazardous)", fillcolor=maroon];
        
        FP [label="False Positives: 8%", fillcolor=lightcoral];
        FN [label="False Negatives: 7%", fillcolor=lightcoral];
        Overall [label="Overall Accuracy: 73.3%\n(R² Score)", fillcolor=lightblue, fontsize=12];
    }
    
    // Metrics box
    subgraph cluster_metrics {
        label="Model Performance Metrics";
        style=filled;
        color=lightyellow;
        fontsize=11;
        
        R2 [label="R² Score: 0.733\n(73.3% variance explained)", fillcolor=lightgreen];
        RMSE [label="RMSE: 10.56 AQI points", fillcolor=lightblue];
        MAE [label="MAE: 8.39 AQI points", fillcolor=lightblue];
        MAPE [label="MAPE: 8.82%", fillcolor=lightblue];
    }
    
    // Layout
    {rank=same; Good; Moderate; UnhealthySensitive; Unhealthy; VeryUnhealthy; Hazardous}
    {rank=same; ActualGood; ActualModerate; ActualUnhealthySensitive; ActualUnhealthy; ActualVeryUnhealthy; ActualHazardous}
    
    // Connections showing prediction flow
    ActualGood -> TP1 [style=invis];
    ActualModerate -> TP2 [style=invis];
    ActualUnhealthySensitive -> TP3 [style=invis];
    ActualUnhealthy -> TP4 [style=invis];
    ActualVeryUnhealthy -> TP5 [style=invis];
    ActualHazardous -> TP6 [style=invis];
}

